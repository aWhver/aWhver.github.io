webpackJsonp([25],{PvlX:function(t,e){},gs9T:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("BO1k"),s=n.n(i),o=n("1uAe"),a=n("0xDb"),l={name:"questionFeedback",data:function(){return{list:null,total:1,listQuery:{page:1},visible:!1,loading:!0,questionContent:{id:"",content:"",questionImage:["http://img.sodive.com/newupload/20171220/1513736922599.jpg"],userId:"",nickName:"",email:"",answerContent:""},index:0}},created:function(){this.GetQuestionList(),this.calculatePictureSize("pictureItem")},watch:{visible:function(t){t?this.calculatePictureSize("pictureItem"):document.getElementsByClassName("photoSwipe")[0].style.display="none"}},methods:{GetQuestionList:function(){var t=this;this.loading=!0,this.visible=!0,Object(o.h)(this.listQuery).then(function(e){t.list=e.data.questionList,t.total=e.data.total,t.loading=!1,t.visible=!1})},answerQuestion:function(t){this.visible=!0,this.questionContent.id=t.id,this.questionContent.content=t.question.content,this.questionContent.questionImage=t.question.images,this.questionContent.userId=t.userId,this.questionContent.nickName=t.nickName,this.questionContent.email=t.email,this.questionContent.answerContent=1===t.status?t.answerContent:""},reply:function(){if(this.questionContent.answerContent){var t=!0,e=!1,n=void 0;try{for(var i,o=s()(this.list);!(t=(i=o.next()).done);t=!0){var l=i.value;l.id===this.questionContent.id&&(l.status=1,l.answerContent=this.questionContent.answerContent,l.answerTime=Object(a.a)(),this.visible=!1,this.$message.success("您已答复该用户!"))}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}}else this.$message.warning("请输入答复内容!")},acceptQuery:function(t){this.listQuery=t.listQuery},calculatePictureSize:function(t){var e=this.$refs[t],n=void 0;this.$nextTick(function(){if(void 0!==e){var t=e[0].offsetWidth,i=!0,o=!1,a=void 0;try{for(var l,r=s()(e);!(i=(l=r.next()).done);i=!0){var c=l.value;n=c.querySelector("img");var u=c.querySelector("img").offsetWidth,d=c.querySelector("img").offsetHeight;u>=d?(n.style.height=t*d/u+"px",n.style.width=t+"px",n.style.marginTop=-t*d/u/2+"px",n.style.marginLeft=-t/2+"px"):(n.style.width=t*u/d+"px",n.style.height=t+"px",n.style.marginTop=-t/2+"px",n.style.marginLeft=-t*u/d/2+"px")}}catch(t){o=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(o)throw a}}}})},photoSwipe:function(t){document.getElementsByClassName("photoSwipe")[0].style.display="block",this.calculatePictureSize("pictureItem1"),this.changePicture(t)},changePicture:function(t){var e=!0,n=!1,i=void 0;try{for(var o,a=s()(this.questionContent.questionImage);!(e=(o=a.next()).done);e=!0){var l=o.value;l===t.target.currentSrc&&(this.index=this.questionContent.questionImage.indexOf(l))}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}},prev:function(){this.index--,this.index<0&&(this.$message.info("已经是第一张了，别再翻了!"),this.index=0)},next:function(){this.index++,this.index>this.questionContent.questionImage.length-1&&(this.$message.info("已经是最后一张了，到头了!"),this.index=this.questionContent.questionImage.length-1)},closePhotoSwipe:function(){document.getElementsByClassName("photoSwipe")[0].style.display="none"}},computed:{currentIndex:function(){return this.index}},filters:{statusFilter:function(t){return["未答复","已答复"][t]}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("certificate-filter",{attrs:{GetList:t.GetQuestionList},on:{sendListQuery:t.acceptQuery}}),t._v(" "),n("el-main",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"text-align":"center"},attrs:{data:t.list,border:"","element-loading-text":"小主,我需要时间..."}},[n("el-table-column",{staticStyle:{"word-break":"keep-all"},attrs:{label:"用户问题",align:"left","min-width":"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){t.answerQuestion(e.row)}}},[t._v(t._s(e.row.question.content))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"提问人ID",prop:"userId",width:"120px"}}),t._v(" "),n("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),t._v(" "),n("el-table-column",{attrs:{label:"昵称",prop:"nickName",width:"120px"}}),t._v(" "),n("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"190px"}}),t._v(" "),n("el-table-column",{attrs:{label:"答复时间",width:"190px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?n("span",[t._v(t._s(e.row.answerTime))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"状态",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("statusFilter")(e.row.status)))])]}}])})],1)],1),t._v(" "),n("el-footer",[n("pagination",{attrs:{total:t.total,listQuery:t.listQuery,GetList:t.GetQuestionList}})],1),t._v(" "),n("el-dialog",{staticClass:"question-container",attrs:{title:"问题内容",visible:t.visible,align:"center",center:""},on:{"update:visible":function(e){t.visible=e}}},[n("div",{staticClass:"question-content"},[n("p",[n("span",[t._v("提问内容:   ")]),t._v(t._s(t.questionContent.content)+"(图片点击大图浏览)")]),t._v(" "),n("div",{staticClass:"question-picture"},t._l(t.questionContent.questionImage,function(e,i){return n("div",{key:i,ref:"pictureItem",refInFor:!0},[n("img",{attrs:{src:e},on:{click:t.photoSwipe}})])})),t._v(" "),n("div",{staticClass:"user-profile"},[n("span",[t._v("提问人ID:   "+t._s(t.questionContent.userId))]),t._v(" "),n("span",[t._v("昵称:   "+t._s(t.questionContent.nickName))]),t._v(" "),n("span",[t._v("邮箱:   "+t._s(t.questionContent.email))])])]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-input",{staticClass:"fl",attrs:{type:"textarea",placeholder:"请输入回复内容"},model:{value:t.questionContent.answerContent,callback:function(e){t.$set(t.questionContent,"answerContent",e)},expression:"questionContent.answerContent"}}),t._v(" "),n("div",{staticClass:"fl"},[n("el-button",{attrs:{type:"primary"},on:{click:t.reply}},[t._v("确定")]),t._v(" "),n("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")])],1)],1)]),t._v(" "),n("div",{staticClass:"photoSwipe"},[n("div",{staticClass:"photoSwipe-container"},[n("div",{staticClass:"picture-container"},t._l(t.questionContent.questionImage,function(e,i){return n("div",{key:i,ref:"pictureItem1",refInFor:!0,class:{active:t.currentIndex===i}},[n("img",{attrs:{src:e}})])})),t._v(" "),n("div",{staticClass:"control"},[n("span",{staticClass:"left-btn btn",on:{click:t.prev}},[n("svg-icon",{attrs:{iconClass:"arrowleftcircle"}})],1),t._v(" "),n("span",{staticClass:"right-btn btn",on:{click:t.next}},[n("svg-icon",{attrs:{iconClass:"arrowrightcircle"}})],1)])]),t._v(" "),n("span",{staticClass:"close",on:{click:t.closePhotoSwipe}},[n("svg-icon",{attrs:{iconClass:"close"}})],1)])],1)},staticRenderFns:[]};var c=n("VU/8")(l,r,!1,function(t){n("PvlX")},null,null);e.default=c.exports}});