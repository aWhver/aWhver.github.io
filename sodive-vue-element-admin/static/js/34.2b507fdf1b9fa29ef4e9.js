webpackJsonp([34],{FKFM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("Xx3T"),i=r("0xDb"),a=r("1uAe"),s={name:"editSodive",data:function(){return{programaMap:[{programa:"sodive",label:"sodive学院"}],routeId:this.$route.params.id,sodiveForm:{id:(1e8*Math.random()).toFixed(0),title:"",description:"",top:"",programaImage:[],createTime:"",programa:"",detail:"",status:"draft"},sodiveRules:{title:[{required:!0,trigger:"blur",message:"文章标题不能为空"}],description:[{required:!0,trigger:"blur",message:"文章描述不能为空"}],programaImage:[{required:!0,trigger:"blur",message:"请上传文章缩略图"}],programa:[{required:!0,trigger:"blur",message:"请选择文章栏目"}],detail:[{required:!0,trigger:"blur",message:"文章内容不能为空"}]}}},created:function(){this.GetSodive()},methods:{submitForm:function(){var e=this;0!==this.sodiveForm.programaImage.length?this.$refs.sodiveForm.validate(function(t){t&&(e.sodiveForm.createTime=Object(i.a)(),Object(a.d)(e.sodiveForm,e.routeId).then(function(t){e.$message.success("发布成功")}))}):this.$message.warning("请等待图片上传成功!")},GetSodive:function(){var e=this;Object(a.j)(this.$route.params.id).then(function(t){void 0!==t.data.sodiveDetail&&(e.sodiveForm=t.data.sodiveDetail)})},resetForm:function(){var e=this;this.sodiveForm={id:(1e8*Math.random()).toFixed(0),title:"",description:"",top:"",programaImage:[],createTime:"",programa:"",detail:"",status:"draft"},this.$nextTick(function(){e.$refs.sodiveForm.clearValidate()})},handleSuccess:function(e,t){this.sodiveForm.programaImage.push({name:t.name,url:t.url})}},components:{tinymce:o.a}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sodive-container"},[r("el-form",{ref:"sodiveForm",attrs:{inline:"",model:e.sodiveForm,rules:e.sodiveRules}},[r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{attrs:{clearable:""},model:{value:e.sodiveForm.title,callback:function(t){e.$set(e.sodiveForm,"title",t)},expression:"sodiveForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"description"}},[r("el-input",{attrs:{clearable:""},model:{value:e.sodiveForm.description,callback:function(t){e.$set(e.sodiveForm,"description",t)},expression:"sodiveForm.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否置顶"}},[r("el-radio-group",{model:{value:e.sodiveForm.top,callback:function(t){e.$set(e.sodiveForm,"top",t)},expression:"sodiveForm.top"}},[r("el-radio",{attrs:{label:"yes"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:"no"}},[e._v("否")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"缩略图",prop:"programaImage"}},[r("el-upload",{attrs:{action:"https://httpbin.org/post","list-type":"picture-card","file-list":e.sodiveForm.programaImage,"on-success":e.handleSuccess}},[r("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),r("el-form-item",{attrs:{label:"栏目",prop:"programa"}},[r("el-select",{model:{value:e.sodiveForm.programa,callback:function(t){e.$set(e.sodiveForm,"programa",t)},expression:"sodiveForm.programa"}},e._l(e.programaMap,function(e){return r("el-option",{key:e.programa,attrs:{value:e.programa,label:e.label}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"内容",prop:"detail"}},[r("tinymce",{attrs:{height:300},model:{value:e.sodiveForm.detail,callback:function(t){e.$set(e.sodiveForm,"detail",t)},expression:"sodiveForm.detail"}})],1),e._v(" "),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("发布")])],1)],1)],1)},staticRenderFns:[]};var m=r("VU/8")(s,l,!1,function(e){r("Xl94")},null,null);t.default=m.exports},Xl94:function(e,t){}});