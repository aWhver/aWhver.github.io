webpackJsonp([13],{DD4h:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("V/8j"),o=r("0xDb"),s={name:"appManage",data:function(){return{list:null,total:1,listQuery:{page:1},visible:!1,versionForm:{id:null,systemType:"",applicationType:"",downloadURL:"",systemName:"",version:"",forceUpdate:"",createTime:""},versionRules:{systemType:[{required:!0,trigger:"blur",message:"请选择系统类型"}],applicationType:[{required:!0,trigger:"blur",message:"请选择应用类型"}],downloadURL:[{required:!0,trigger:"blur",message:"请填写下载地址"}],systemName:[{required:!0,trigger:"blur",message:"请填写系统名称"}],version:[{required:!0,trigger:"blur",message:"请填写版本号"}],forceUpdate:[{required:!0,trigger:"blur",message:"请选择是否强制更新"}]},isEdit:!1}},created:function(){this.GetVersionList()},methods:{GetVersionList:function(){var e=this;Object(i.d)(this.listQuery).then(function(t){e.list=t.data.versionList,e.total=t.data.total})},submitForm:function(){var e=this;this.$refs.versionForm.validate(function(t){t&&(e.isEdit?e.list.forEach(function(t,r){t.id===e.versionForm.id&&(e.versionForm.createTime=Object(o.a)(e.versionForm.createTime),e.list.splice(r,1,e.versionForm),e.$notify({title:"修改成功",message:"已修改版本信息",type:"success",duration:2e3}))}):(e.versionForm.createTime=Object(o.a)(e.versionForm.createTime),e.list.unshift(e.versionForm),e.$notify({title:"提交成功",message:"成功提交版本信息",type:"success",duration:2e3})),e.visible=!1,e.isEdit=!1)})},handleCreate:function(){var e=this;this.visible=!0,this.resetForm(),this.$nextTick(function(){e.$refs.versionForm.clearValidate()})},resetForm:function(){this.versionForm={id:null,systemType:"",applicationType:"",downloadURL:"",systemName:"",version:"",forceUpdate:"",createTime:""}},cancelForm:function(){this.resetForm(),this.visible=!1,this.isEdit=!1},editVersionInfo:function(e){this.visible=!0,this.isEdit=!0,this.versionForm={id:e.id,systemType:e.systemType+"",applicationType:e.applicationType+"",downloadURL:e.downloadURL,systemName:e.systemName,version:e.version,forceUpdate:e.forceUpdate+"",createTime:e.createTime}}},filters:{systemTypeFilter:function(e){return["教练版","用户版"][e]},applicationTypeFilter:function(e){return["Android","IOS"][e]},forceUpdateFilter:function(e){return["不强制","强制"][e]}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-header",[r("div",{staticClass:"filter-item",staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("新增"),r("i",{staticClass:"el-icon-circle-plus"})])],1)]),e._v(" "),r("el-main",[r("el-table",{staticStyle:{"text-align":"center"},attrs:{data:e.list,border:""}},[r("el-table-column",{attrs:{label:"系统类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("systemTypeFilter")(t.row.systemType)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"系统名称",prop:"systemName"}}),e._v(" "),r("el-table-column",{attrs:{label:"应用类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("applicationTypeFilter")(t.row.applicationType)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"版本号",prop:"version"}}),e._v(" "),r("el-table-column",{attrs:{label:"强制更新"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("forceUpdateFilter")(t.row.forceUpdate)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"下载地址",prop:"downloadURL","min-width":"300",align:"left"}}),e._v(" "),r("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){e.editVersionInfo(t.row)}}},[r("i",{staticClass:"el-icon-edit"}),e._v("编辑")])]}}])})],1)],1),e._v(" "),r("el-footer",[r("pagination",{attrs:{total:e.total,listQuery:e.listQuery,GetList:e.GetVersionList}})],1),e._v(" "),r("el-dialog",{staticClass:"versionDialog",attrs:{title:"新增/编辑",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"versionForm",attrs:{model:e.versionForm,rules:e.versionRules,inline:""}},[r("el-form-item",{attrs:{label:"系统类型",prop:"systemType"}},[r("el-radio-group",{model:{value:e.versionForm.systemType,callback:function(t){e.$set(e.versionForm,"systemType",t)},expression:"versionForm.systemType"}},[r("el-radio",{attrs:{label:"1"}},[e._v("用户版")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("教练版版")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"应用类型",prop:"applicationType"}},[r("el-radio-group",{model:{value:e.versionForm.applicationType,callback:function(t){e.$set(e.versionForm,"applicationType",t)},expression:"versionForm.applicationType"}},[r("el-radio",{attrs:{label:"0"}},[e._v("Android")]),e._v(" "),r("el-radio",{attrs:{label:"1"}},[e._v("IOS")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"下载地址",prop:"downloadURL"}},[r("el-input",{staticStyle:{width:"400px"},attrs:{clearable:""},model:{value:e.versionForm.downloadURL,callback:function(t){e.$set(e.versionForm,"downloadURL",t)},expression:"versionForm.downloadURL"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"系统名称",prop:"systemName"}},[r("el-input",{attrs:{clearable:""},model:{value:e.versionForm.systemName,callback:function(t){e.$set(e.versionForm,"systemName",t)},expression:"versionForm.systemName"}})],1),e._v(" "),r("el-form-item",{staticStyle:{display:"block"},attrs:{label:"版本号",prop:"version"}},[r("el-input",{attrs:{clearable:""},model:{value:e.versionForm.version,callback:function(t){e.$set(e.versionForm,"version",t)},expression:"versionForm.version"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"时间"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.versionForm.createTime,callback:function(t){e.$set(e.versionForm,"createTime",t)},expression:"versionForm.createTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"强制更新",prop:"forceUpdate"}},[r("el-radio-group",{model:{value:e.versionForm.forceUpdate,callback:function(t){e.$set(e.versionForm,"forceUpdate",t)},expression:"versionForm.forceUpdate"}},[r("el-radio",{attrs:{label:"0"}},[e._v("不强制")]),e._v(" "),r("el-radio",{attrs:{label:"1"}},[e._v("强制")])],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isEdit?r("el-button",{on:{click:e.cancelForm}},[e._v("取消")]):r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"info"},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var a=r("VU/8")(s,l,!1,function(e){r("JFpz")},null,null);t.default=a.exports},JFpz:function(e,t){}});