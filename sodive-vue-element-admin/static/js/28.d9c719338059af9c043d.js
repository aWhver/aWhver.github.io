webpackJsonp([28],{"4jzu":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("BO1k"),a=i.n(n),l=i("woOf"),o=i.n(l),s=i("ms7A"),r={},u={name:"agent",data:function(){return{list:null,total:1,loading:!0,agentVisible:!1,modifyVisible:!1,cancelVisible:!1,listQuery:{page:1},ModifyData:{id:"",userId:"",nickName:"",point:0,registerTime:"",ownCoach:0,email:"",sex:"",phoneNo:"",countryName:"",status:0},countryMap:[],downloadLoading:!1}},created:function(){this.GetAgentList()},methods:{GetAgentList:function(){var t=this;this.loading=!0,Object(s.b)(this.listQuery).then(function(e){t.list=e.data.agentList,t.total=e.data.total,t.loading=!1})},searchBtn:function(){this.listQuery.page=1,this.GetAgentList()},AddAgent:function(){var t=this;this.loading=!0,Object(s.a)(this.listQuery.agentId,this.listQuery.countryName,this.listQuery.email).then(function(e){t.list.unshift(e.data.newArticle),t.total=e.data.total,t.loading=!1,t.agentVisible=!1,t.$notify({type:e.data.info,title:"成功",message:"添加合伙人成功",duration:2e3})})},modifyData:function(t){this.ModifyData=o()({},t),this.modifyVisible=!0;var e=this.countryMap.filter(function(e){return e.key===t.countryName});this.ModifyData.countryName=e[0].key},sureModify:function(){var t=!0,e=!1,i=void 0;try{for(var n,l=a()(this.list);!(t=(n=l.next()).done);t=!0){var o=n.value;if(o.id===this.ModifyData.id){var s=this.list.indexOf(o);this.list.splice(s,1,this.ModifyData);break}}}catch(t){e=!0,i=t}finally{try{!t&&l.return&&l.return()}finally{if(e)throw i}}this.modifyVisible=!1,this.$notify({type:"success",title:"成功",message:"修改国籍成功",duration:2e3})},logOff:function(t){this.ModifyData=o()({},t),this.cancelVisible=!0},sureLogOff:function(){var t=!0,e=!1,i=void 0;try{for(var n,l=a()(this.list);!(t=(n=l.next()).done);t=!0){var o=n.value;if(o.userId===this.ModifyData.userId){var s=this.list.indexOf(o);this.list[s].status=1;break}}}catch(t){e=!0,i=t}finally{try{!t&&l.return&&l.return()}finally{if(e)throw i}}this.cancelVisible=!1,this.$notify({type:"success",title:"成功",message:"注销成功",duration:2e3})},handleSizeChange:function(t){this.listQuery.limit=t,this.GetAgentList()},handleCurrentChange:function(t){this.listQuery.page=t,this.GetAgentList()},excelExport:function(){var t=this;this.downloadLoading=!0,i.e(38).then(i.bind(null,"zWO4")).then(function(e){var i=t.formatJson(["userId","nickName","point","registerTime","countryName","ownCoach","status"],t.list);e.export_json_to_excel(["id","昵称","积分","注册时间","国籍","下属教练","状态"],i,"agent-list"),t.downloadLoading=!1})},formatJson:function(t,e){var i=["正常","注销"];return e.map(function(e){return t.map(function(t){return"countryName"===t?r[e[t]]:"status"===t?i[e[t]]:e[t]})})},acceptQuery:function(t){this.listQuery=t.listQuery,this.countryMap=t.countryMap,r=t.countryMap.reduce(function(t,e){return t[e.key]=e.name,t},{})}},filters:{countryFilter:function(t){return r[t]}},components:{multiplicationFilter:i("ILbm").a}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-container",[i("multiplicationFilter",{attrs:{searchBtn:t.searchBtn},on:{sendListQuery:t.acceptQuery}},[i("div",{staticClass:"filter-item"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.searchBtn()}}},[t._v("搜索")])],1),t._v(" "),i("div",{staticClass:"filter-item"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-download",loading:t.downloadLoading},on:{click:t.excelExport}},[t._v("Excel")])],1),t._v(" "),i("div",{staticClass:"filter-item"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.agentVisible=!0}}},[t._v("新增合伙人")])],1)]),t._v(" "),i("el-main",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"","element-loading-text":"小主,我需要时间..."}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-form",{staticClass:"expand-table",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"性别"}},[i("span",[t._v(t._s(e.row.sex))])]),t._v(" "),i("el-form-item",{attrs:{label:"邮箱"}},[i("span",[t._v(t._s(e.row.email))])]),t._v(" "),i("el-form-item",{attrs:{label:"手机"}},[i("span",[t._v(t._s(e.row.phoneNo))])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"序号",width:"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"id",width:"90px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.userId))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"昵称",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.nickName))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"积分",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.point))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"注册时间","min-width":"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.registerTime))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"国籍",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("countryFilter")(e.row.countryName)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"下属教练",width:"90px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.ownCoach))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"状态",width:"70px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?i("el-tag",{attrs:{type:"info"}},[t._v("\n              正常\n            ")]):t._e(),t._v(" "),1===e.row.status?i("el-tag",{attrs:{type:"danger"}},[t._v("\n              注销\n            ")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary"},on:{click:function(i){t.modifyData(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"info",disabled:1===e.row.status},on:{click:function(i){t.logOff(e.row)}}},[t._v("注销")])]}}])})],1)],1),t._v(" "),i("el-footer",[i("pagination",{attrs:{listQuery:t.listQuery,total:t.total,GetList:t.GetAgentList}})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"新增合伙人",visible:t.agentVisible,width:"350px"},on:{"update:visible":function(e){t.agentVisible=e}}},[i("div",{staticClass:"input-item"},[i("el-input",{attrs:{placeholder:"输入合伙人ID"},model:{value:t.listQuery.agentId,callback:function(e){t.$set(t.listQuery,"agentId",e)},expression:"listQuery.agentId"}})],1),t._v(" "),i("div",{staticClass:"input-item"},[i("el-select",{model:{value:t.listQuery.countryName,callback:function(e){t.$set(t.listQuery,"countryName",e)},expression:"listQuery.countryName"}},t._l(t.countryMap,function(t){return i("el-option",{key:t.key,attrs:{value:t.key,label:t.name}})}))],1),t._v(" "),i("div",{staticClass:"input-item"},[i("el-input",{attrs:{placeholder:"输入合伙人邮箱地址"},model:{value:t.listQuery.email,callback:function(e){t.$set(t.listQuery,"email",e)},expression:"listQuery.email"}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.agentVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.AddAgent()}}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"修改合伙人国籍信息",visible:t.modifyVisible,width:"350px"},on:{"update:visible":function(e){t.modifyVisible=e}}},[i("div",{staticClass:"input-item"},[i("el-select",{model:{value:t.ModifyData.countryName,callback:function(e){t.$set(t.ModifyData,"countryName",e)},expression:"ModifyData.countryName"}},t._l(t.countryMap,function(t){return i("el-option",{key:t.key,attrs:{value:t.key,label:t.name}})}))],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.modifyVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureModify()}}},[t._v("确 定")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"注销合伙人",visible:t.cancelVisible,width:"350px",center:""},on:{"update:visible":function(e){t.cancelVisible=e}}},[i("div",{staticClass:"input-item",staticStyle:{"text-align":"center"}},[i("h3",[t._v("确定要注销合伙人(ID: A45454)?")])]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.cancelVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureLogOff()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=i("VU/8")(u,c,!1,function(t){i("RHtN")},null,null);e.default=d.exports},RHtN:function(t,e){}});