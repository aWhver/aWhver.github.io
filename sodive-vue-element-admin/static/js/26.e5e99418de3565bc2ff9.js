webpackJsonp([26],{"8bJT":function(t,e){},wrxm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("BO1k"),a=n.n(i),o=n("ms7A"),l={},s={name:"coach",data:function(){return{total:1,list:null,loading:!0,visible:!1,listQuery:{page:1},countryMap:[],selectedInfo:{isLogOff:null,coachId:null},promptMap:["恢复教练成功","注销教练成功"],imageList:[],downloadLoading:!1}},created:function(){this.GetCoachList()},methods:{GetCoachList:function(){var t=this;this.loading=!0,Object(o.d)(this.listQuery).then(function(e){t.list=e.data.coachList,t.total=e.data.total,t.loading=!1})},showDialog:function(t){this.selectedInfo.isLogOff=t.status?0:1,this.selectedInfo.coachId=t.userId,this.visible=!0},logOffReback:function(){var t=!0,e=!1,n=void 0;try{for(var i,o=a()(this.list);!(t=(i=o.next()).done);t=!0){var l=i.value;if(l.userId===this.selectedInfo.coachId){0===l.status?l.status=1:l.status=0,this.$notify({type:"success",message:this.promptMap[l.status],title:"Prompt",duration:2e3}),this.visible=!1;break}}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}},browseCertificate:function(t){this.imageList=t.image},searchBtn:function(){this.listQuery.page=1,this.GetCoachList()},excelExport:function(){var t=this;this.downloadLoading=!0,n.e(38).then(n.bind(null,"zWO4")).then(function(e){var n=t.formatJson(["userId","nickName","countryName","point","registerTime","certificate","bindUser","agent","status"],t.list);e.export_json_to_excel(["教练ID","昵称","地区","积分","注册时间","证书","绑定用户","合伙人","状态"],n,"coach-list"),t.downloadLoading=!1})},formatJson:function(t,e){var n=["正常","注销"];return e.map(function(e){return t.map(function(t){return"countryName"===t?l[e[t]]:"status"===t?n[e[t]]:e[t]})})},acceptQuery:function(t){this.listQuery=t.listQuery,this.countryMap=t.countryMap,l=t.countryMap.reduce(function(t,e){return t[e.key]=e.name,t},{})}},filters:{countryFilter:function(t){return l[t]}},components:{multiplicationFilter:n("ILbm").a}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-container",[n("multiplicationFilter",{attrs:{searchBtn:t.searchBtn},on:{sendListQuery:t.acceptQuery}},[n("div",{staticClass:"filter-item"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.searchBtn()}}},[t._v("搜索")])],1),t._v(" "),n("div",{staticClass:"filter-item"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-download",loading:t.downloadLoading},on:{click:t.excelExport}},[t._v("Excel")])],1)]),t._v(" "),n("el-main",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.list,"element-loading-text":"小主,我需要时间..."}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-form",{staticClass:"expand-table",attrs:{"label-position":"left",inline:""}},[n("el-form-item",[n("img",{attrs:{src:e.row.coachAvatar,alt:""}})]),t._v(" "),n("el-form-item",{attrs:{label:"性别"}},[n("span",[t._v(t._s(e.row.sex))])]),t._v(" "),n("el-form-item",{attrs:{label:"手机"}},[n("span",[t._v(t._s(e.row.phoneNo))])]),t._v(" "),n("el-form-item",{attrs:{label:"邮箱"}},[n("span",[t._v(t._s(e.row.email))])])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"序号",align:"center",prop:"id"}}),t._v(" "),n("el-table-column",{attrs:{label:"教练ID",align:"center",prop:"userId"}}),t._v(" "),n("el-table-column",{attrs:{label:"昵称",align:"center",prop:"nickName"}}),t._v(" "),n("el-table-column",{attrs:{label:"地区",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("countryFilter")(e.row.countryName)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"积分",align:"center",prop:"point"}}),t._v(" "),n("el-table-column",{attrs:{label:"注册时间","min-width":"120px",align:"center",prop:"registerTime"}}),t._v(" "),n("el-table-column",{attrs:{label:"证书",align:"center",prop:"certificate"}}),t._v(" "),n("el-table-column",{attrs:{label:"绑定用户",align:"center",prop:"bindUser"}}),t._v(" "),n("el-table-column",{attrs:{label:"合伙人",align:"center",prop:"agent"}}),t._v(" "),n("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?n("el-tag",{attrs:{type:"info"}},[t._v("\n              正常\n            ")]):t._e(),t._v(" "),1===e.row.status?n("el-tag",{attrs:{type:"danger"}},[t._v("\n              注销\n            ")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"190px"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status&&"未上传"!==e.row.certificate?[n("el-button",{attrs:{type:"info"},on:{click:function(n){t.showDialog(e.row)}}},[t._v("注销")]),t._v(" "),n("el-button",{attrs:{type:"success",icon:"el-icon-picture"},on:{click:function(n){t.browseCertificate(e.row)}}},[t._v("查看证书")])]:1===e.row.status&&"未上传"!==e.row.certificate?[n("el-button",{attrs:{type:"primary"},on:{click:function(n){t.showDialog(e.row)}}},[t._v("恢复")]),t._v(" "),n("el-button",{attrs:{type:"success",icon:"el-icon-picture"},on:{click:function(n){t.browseCertificate(e.row)}}},[t._v("查看证书")])]:1===e.row.status?[n("el-button",{attrs:{type:"primary"},on:{click:function(n){t.showDialog(e.row)}}},[t._v("恢复")])]:[n("el-button",{attrs:{type:"info"},on:{click:function(n){t.showDialog(e.row)}}},[t._v("注销")])]]}}])})],1)],1),t._v(" "),n("el-footer",[n("pagination",{attrs:{listQuery:t.listQuery,total:t.total,GetList:t.GetCoachList}})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:t.selectedInfo.isLogOff?"注销教练":"恢复教练",visible:t.visible,width:"350px",center:""},on:{"update:visible":function(e){t.visible=e}}},[n("div",{staticClass:"input-item",staticStyle:{"text-align":"center"}},[t.selectedInfo.isLogOff?n("h3",[t._v("确定要注销教练(ID: "+t._s(t.selectedInfo.coachId)+")?")]):n("h3",[t._v("确定要恢复教练(ID: "+t._s(t.selectedInfo.coachId)+")?")])]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.logOffReback()}}},[t._v("确 定")])],1)]),t._v(" "),n("photo-swipe",{attrs:{imageList:t.imageList}})],1)},staticRenderFns:[]};var c=n("VU/8")(s,r,!1,function(t){n("8bJT")},null,null);e.default=c.exports}});