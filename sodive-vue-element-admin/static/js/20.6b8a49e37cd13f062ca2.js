webpackJsonp([20],{T3BH:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("BO1k"),i=o.n(r),l=o("d7EF"),a=o.n(l),n=o("1uAe"),c={name:"recommendGoods",data:function(){return{list:null,total:1,listQuery:{page:1,productionName:null},visible:!1,productionForm:{productionNo:"",productionName:"",productionImage:[],coachProfit:"",recommend:"",effective:"",showRegion:"",detail:"",id:(1e11*Math.random()).toFixed(0)},productionRules:{productionNo:[{required:!0,trigger:"blur",message:"请输入货品编号"}],productionName:[{required:!0,trigger:"blur",message:"请输入产品名称"}],productionImage:[{required:!0,trigger:"blur",message:"请上传图片列表"}],coachProfit:[{required:!0,trigger:"blur, change",message:"请输入教练收益"},{type:"number",message:"此项必须为数字"}],recommend:[{required:!0,trigger:"blur, change",message:"请选择是否推荐"}],effective:[{required:!0,trigger:"blur, change",message:"请选择是否有效"}],showRegion:[{required:!0,trigger:"blur, change",message:"请选择显示地区"}],detail:[{required:!0,trigger:"blur",message:"请输入产品详情"}]},isEdit:!1}},created:function(){this.GetRecommendProduction()},methods:{GetRecommendProduction:function(){var e=this;Object(n.i)(this.listQuery).then(function(t){e.list=t.data.recommendProduction,e.total=t.data.total})},submitForm:function(){var e=this;this.$refs.productionForm.validate(function(t){if(t){if(e.isEdit){var o=!0,r=!1,l=void 0;try{for(var c,s=i()(e.list.entries());!(o=(c=s.next()).done);o=!0){var u=c.value,d=a()(u,2),m=d[0];if(d[1].id===e.productionForm.id){e.list.splice(m,1,e.productionForm),e.$message.success("发布成功");break}}}catch(e){r=!0,l=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw l}}}else Object(n.a)(e.productionForm).then(function(){e.$message.success("发布成功"),e.list.unshift(e.productionForm)});e.visible=!1}})},editProduction:function(e){this.isEdit=!0,this.visible=!0,this.productionForm=e,this.productionForm.recommend=e.recommend+"",this.productionForm.effective=e.effective+""},addProduction:function(){var e=this;this.visible=!0,this.isEdit=!1,this.productionForm={productionNo:"",productionName:"",productionImage:[],coachProfit:"",recommend:"",effective:"",showRegion:"",detail:""},this.$nextTick(function(){e.$refs.productionForm.clearValidate()})},handleSuccess:function(e,t){this.productionForm.productionImage.push({name:t.name,url:t.url})},acceptQuery:function(e){this.listQuery=e.listQuery}},filters:{showRegionFilter:function(e){return{all:"全部",China:"中国",abroad:"海外"}[e]},statusFilter:function(e){return{true:"是",false:"否"}[e]}},components:{tinymce:o("Xx3T").a}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"production-container"},[o("certificate-filter",{attrs:{GetList:e.GetRecommendProduction},on:{sendListQuery:e.acceptQuery}},[o("div",{staticClass:"filter-item"},[o("el-input",{attrs:{placeholder:"产品名称",clearable:""},model:{value:e.listQuery.productionName,callback:function(t){e.$set(e.listQuery,"productionName",t)},expression:"listQuery.productionName"}})],1),e._v(" "),o("div",{staticClass:"filter-item fr"},[o("el-button",{attrs:{type:"primary"},on:{click:e.addProduction}},[e._v("新增产品")])],1)]),e._v(" "),o("el-main",[o("el-table",{staticStyle:{"text-align":"center"},attrs:{data:e.list,border:""}},[o("el-table-column",{attrs:{label:"产品名称",prop:"productionName"}}),e._v(" "),o("el-table-column",{attrs:{label:"产品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("img",{attrs:{src:e.row.productionImage[0].url,width:"50",height:"50"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"教练收益",prop:"coachProfit"}}),e._v(" "),o("el-table-column",{attrs:{label:"是否推荐"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("statusFilter")(t.row.recommend)))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"是否有效"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("statusFilter")(t.row.effective)))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"总分享次数",prop:"shareNum"}}),e._v(" "),o("el-table-column",{attrs:{label:"购买次数",prop:"buyNum"}}),e._v(" "),o("el-table-column",{attrs:{label:"显示地区"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(e._f("showRegionFilter")(t.row.showRegion)))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){e.editProduction(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),o("el-footer",[o("pagination",{attrs:{total:e.total,listQuery:e.listQuery,GetList:e.GetRecommendProduction}})],1),e._v(" "),o("el-dialog",{attrs:{title:"新增/编辑",visible:e.visible,center:""},on:{"update:visible":function(t){e.visible=t}}},[o("el-form",{ref:"productionForm",attrs:{inline:"","label-width":"120px","label-position":"right",model:e.productionForm,rules:e.productionRules}},[o("el-form-item",{attrs:{label:"货品号",prop:"productionNo"}},[o("el-input",{attrs:{clearable:""},model:{value:e.productionForm.productionNo,callback:function(t){e.$set(e.productionForm,"productionNo",t)},expression:"productionForm.productionNo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"产品名称",prop:"productionName"}},[o("el-input",{attrs:{clearable:""},model:{value:e.productionForm.productionName,callback:function(t){e.$set(e.productionForm,"productionName",t)},expression:"productionForm.productionName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"产品图片",prop:"productionImage"}},[o("el-upload",{attrs:{action:"https://httpbin.org/post","list-type":"picture-card","file-list":e.productionForm.productionImage,"on-success":e.handleSuccess}},[o("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),o("el-form-item",{attrs:{label:"教练收益",prop:"coachProfit"}},[o("el-input",{attrs:{clearable:""},model:{value:e.productionForm.coachProfit,callback:function(t){e.$set(e.productionForm,"coachProfit",e._n(t))},expression:"productionForm.coachProfit"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"是否推荐",prop:"recommend"}},[o("el-radio-group",{model:{value:e.productionForm.recommend,callback:function(t){e.$set(e.productionForm,"recommend",t)},expression:"productionForm.recommend"}},[o("el-radio",{attrs:{label:"true"}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:"false"}},[e._v("否")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"是否有效",prop:"effective"}},[o("el-radio-group",{model:{value:e.productionForm.effective,callback:function(t){e.$set(e.productionForm,"effective",t)},expression:"productionForm.effective"}},[o("el-radio",{attrs:{label:"true"}},[e._v("有效")]),e._v(" "),o("el-radio",{attrs:{label:"false"}},[e._v("无效")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"显示地区",prop:"showRegion"}},[o("el-radio-group",{model:{value:e.productionForm.showRegion,callback:function(t){e.$set(e.productionForm,"showRegion",t)},expression:"productionForm.showRegion"}},[o("el-radio",{attrs:{label:"all"}},[e._v("全部")]),e._v(" "),o("el-radio",{attrs:{label:"China"}},[e._v("中国")]),e._v(" "),o("el-radio",{attrs:{label:"abroad"}},[e._v("海外")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"详情",prop:"detail"}},[o("tinymce",{attrs:{height:300},model:{value:e.productionForm.detail,callback:function(t){e.$set(e.productionForm,"detail",t)},expression:"productionForm.detail"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("发布")])],1)],1)],1)},staticRenderFns:[]};var u=o("VU/8")(c,s,!1,function(e){o("r/a4")},null,null);t.default=u.exports},"r/a4":function(e,t){}});