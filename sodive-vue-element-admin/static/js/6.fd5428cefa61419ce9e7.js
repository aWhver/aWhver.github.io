webpackJsonp([6],{Napl:function(t,e){},Qi6e:function(t,e){},so1m:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("BO1k"),a=s.n(i),n=s("1uAe"),l=[{status:"pending",label:"待审核"},{status:"pended",label:"审核通过"},{status:"failed",label:"审核失败"}].reduce(function(t,e){return t[e.status]=e.label,t},{}),r={props:{type:{type:String,required:!0,default:"pending"}},data:function(){return{list:null,total:1,listQuery:{page:1,type:this.type,userId:null},loading:!0,visible:!1,selectedUserId:"",reason:"",visibleDetail:!1,detail:{nickName:"",userId:void 0,submitTime:"",taskContent:null}}},created:function(){this.GetTaskList()},methods:{GetTaskList:function(){var t=this;this.loading=!0,Object(n.m)(this.listQuery).then(function(e){t.list=e.data.taskList.map(function(e){return t.$set(e,"isCheck",!1),e}),t.total=e.data.total,t.loading=!1})},pass:function(t){var e=!0,s=!1,i=void 0;try{for(var n,l=a()(this.list);!(e=(n=l.next()).done);e=!0){var r=n.value;if(r.userId===t.userId){var u=this.list.indexOf(r);this.list[u].status="pended";break}}}catch(t){s=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(s)throw i}}this.$notify({type:"success",title:"审核通过",message:"已将该用户所做任务为通过",duration:2e3})},noPass:function(t){this.visible=!0,this.selectedUserId=t.userId},sureNoPass:function(){if(""===this.reason)return this.$message({message:"请输入不通过理由",type:"warning"}),!1;var t=!0,e=!1,s=void 0;try{for(var i,n=a()(this.list);!(t=(i=n.next()).done);t=!0){var l=i.value;if(l.userId===this.selectedUserId){var r=this.list.indexOf(l);this.list[r].status="failed";break}}}catch(t){e=!0,s=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw s}}this.visible=!1,this.reason="",this.$notify({type:"success",title:"审核不通过",message:"已将该用户任务标记为不通过",duration:2e3})},checkDetail:function(t){this.visibleDetail=!0,this.detail={nickName:t.nickName,userId:t.userId,submitTime:t.submitTime,taskContent:t.taskContent}},acceptQuery:function(t){this.listQuery=t.listQuery,this.listQuery.type=this.type}},filters:{taskStatusFilter:function(t){return l[t]},taskTagFilter:function(t){return{pending:"primary",pended:"success",failed:"danger"}[t]}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("certificate-filter",{attrs:{GetList:t.GetTaskList},on:{sendListQuery:t.acceptQuery}},[s("div",{staticClass:"filter-item"},[s("el-input",{attrs:{placeholder:"用户ID",clearable:""},model:{value:t.listQuery.userId,callback:function(e){t.$set(t.listQuery,"userId",e)},expression:"listQuery.userId"}})],1)]),t._v(" "),s("el-main",[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"text-align":"center"},attrs:{data:t.list,"element-loading-text":"小主,我需要时间...",border:""}},[s("el-table-column",{attrs:{label:"任务名称",prop:"taskName"}}),t._v(" "),s("el-table-column",{attrs:{label:"用户ID",prop:"userId"}}),t._v(" "),s("el-table-column",{attrs:{label:"昵称",prop:"nickName"}}),t._v(" "),s("el-table-column",{attrs:{label:"提交时间",prop:"submitTime"}}),t._v(" "),"failed"===t.type?s("el-table-column",{attrs:{label:"拒绝理由","min-width":"240",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.refuseReason))])]}}])}):t._e(),t._v(" "),s("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:t._f("taskTagFilter")(e.row.status)}},[t._v(t._s(t._f("taskStatusFilter")(e.row.status)))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){return["pending"===e.row.status?[s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(s){t.pass(e.row)}}},[t._v("通过")]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){t.noPass(e.row)}}},[t._v("不通过")]),t._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-picture"},on:{click:function(s){t.checkDetail(e.row)}}},[t._v("查看")])]:"pended"===e.row.status?[s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-picture"},on:{click:function(s){t.checkDetail(e.row)}}},[t._v("查看")])]:[s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(s){t.pass(e.row)}}},[t._v("通过")]),t._v(" "),s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-picture"},on:{click:function(s){t.checkDetail(e.row)}}},[t._v("查看")])]]}}])})],1)],1),t._v(" "),s("el-footer",[s("pagination",{attrs:{total:t.total,listQuery:t.listQuery,GetList:t.GetTaskList}})],1),t._v(" "),s("el-dialog",{attrs:{title:"将此用户任务标记为不通过",visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[s("div",[s("el-input",{attrs:{placeholder:"请输入不通过理由"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureNoPass()}}},[t._v("确定")])],1)]),t._v(" "),s("el-dialog",{staticClass:"taskDetail",attrs:{title:"查看任务详情",align:"center",visible:t.visibleDetail},on:{"update:visible":function(e){t.visibleDetail=e}}},[s("div",{staticClass:"subInfo"},[s("p",[s("span",[t._v("用户ID：")]),s("span",[t._v(t._s(t.detail.userId))])]),t._v(" "),s("p",[s("span",[t._v("用户昵称：")]),s("span",[t._v(t._s(t.detail.nickName))])]),t._v(" "),s("p",[s("span",[t._v("提交时间：")]),s("span",[t._v(t._s(t.detail.submitTime))])])]),t._v(" "),s("div",{staticClass:"task"},[s("ul",t._l(t.detail.taskContent,function(e,i){return s("li",[s("strong",[t._v("任务"+t._s(i+1))]),t._v(" "),s("p",[t._v(t._s(e))])])}))])])],1)},staticRenderFns:[]};var o={name:"taskPending",data:function(){return{activeName:"pending",taskStatusMap:[{status:"pending",label:"待审核"},{status:"pended",label:"审核通过"},{status:"failed",label:"审核失败"}]}},components:{taskPend:s("VU/8")(r,u,!1,function(t){s("Napl")},null,null).exports}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.taskStatusMap,function(e){return s("el-tab-pane",{key:e.status,attrs:{label:e.label,name:e.status}},[s("keep-alive",[t.activeName===e.status?s("task-pend",{attrs:{type:e.status}}):t._e()],1)],1)}))],1)},staticRenderFns:[]};var d=s("VU/8")(o,c,!1,function(t){s("Qi6e")},null,null);e.default=d.exports}});